{"version":3,"file":"script.js","mappings":";;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACPA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://gather-helper/./src/popup/enums.ts","webpack://gather-helper/webpack/bootstrap","webpack://gather-helper/webpack/runtime/define property getters","webpack://gather-helper/webpack/runtime/hasOwnProperty shorthand","webpack://gather-helper/webpack/runtime/make namespace object","webpack://gather-helper/./src/contentScript/script.ts"],"sourcesContent":["export var ActionType;\n(function (ActionType) {\n    ActionType[\"SINGLE_EMOTICON\"] = \"SINGLE_EMOTICON\";\n    ActionType[\"MULTI_EMOTICON\"] = \"MULTI_EMOTICON\";\n    ActionType[\"STEAL_GOKART\"] = \"STEAL_GOKART\";\n    ActionType[\"GET_PLAYERS\"] = \"GET_PLAYERS\";\n    ActionType[\"TELEPORT\"] = \"TELEPORT\";\n    ActionType[\"MOVEMENT_SPEED\"] = \"MOVEMENT_SPEED\";\n})(ActionType || (ActionType = {}));\nexport var MessageSource;\n(function (MessageSource) {\n    MessageSource[\"GATHER\"] = \"GATHER\";\n    MessageSource[\"EXTENSION\"] = \"EXTENSION\";\n})(MessageSource || (MessageSource = {}));\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { ActionType, MessageSource } from \"../popup/enums\";\nconst fnc = (event) => {\n    if (event.source != window) {\n        return;\n    }\n    if (event.data.type && event.data.type === MessageSource.EXTENSION) {\n        switch (event.data.action) {\n            case ActionType.SINGLE_EMOTICON:\n                setEmote(event.data.data);\n                break;\n            case ActionType.MULTI_EMOTICON:\n                multiEmote(event.data.data.emote);\n                break;\n            case ActionType.STEAL_GOKART:\n                stealGocart();\n                break;\n            case ActionType.GET_PLAYERS:\n                const players = getAllPlayer();\n                window.postMessage({\n                    type: MessageSource.GATHER,\n                    action: ActionType.GET_PLAYERS,\n                    players,\n                }, \"*\");\n                break;\n            case ActionType.TELEPORT:\n                const player = event.data.data;\n                teleport(player.map, player.x, player.y);\n                break;\n            case ActionType.MOVEMENT_SPEED:\n                setMovementSpeed(event.data.data);\n                break;\n        }\n    }\n};\nwindow.addEventListener(\"message\", fnc, false);\nconst setEmote = (emote) => {\n    const isEmoji = (str) => /[\\p{Emoji}]/u.test(str);\n    if (emote.length > 1 && !isEmoji(emote)) {\n        multiEmote(emote);\n    }\n    else {\n        window.game.setEmote(emote);\n    }\n};\nconst multiEmote = (emote) => __awaiter(void 0, void 0, void 0, function* () {\n    for (let i = 0; i < 5; i++) {\n        for (let c = 0; c < emote.length; c++) {\n            window.game.setEmote(emote.charAt(c));\n            yield new Promise((r) => setTimeout(r, 500));\n        }\n        window.game.setEmote(\"\");\n    }\n});\nconst teleport = (map, x, y) => __awaiter(void 0, void 0, void 0, function* () {\n    window.game.teleport(map, x, y);\n});\nconst setMovementSpeed = (speed) => __awaiter(void 0, void 0, void 0, function* () {\n    window.game.setSpeedModifier(speed);\n});\nconst getAllPlayer = () => {\n    return window.game.players;\n};\nconst stealGocart = () => __awaiter(void 0, void 0, void 0, function* () {\n    for (let mapId of Object.keys(window.game.completeMaps)) {\n        const gokartObjects = window.game.filterObjectsInMap(mapId, (obj) => (obj === null || obj === void 0 ? void 0 : obj._name) === \"Go-kart\");\n        if (gokartObjects.length) {\n            const gokart = gokartObjects[0];\n            if (!gokart || !gokart.id)\n                return;\n            const gokartObj = window.game.getObject(gokart.id);\n            if (!gokartObj)\n                return;\n            window.game.interact(mapId, gokartObj.key);\n            break;\n        }\n    }\n});\nconst getPos = () => {\n    const player = window.game.getMyPlayer();\n    return { x: player.x, y: player.y, direction: player.direction };\n};\nfunction attack() {\n    return __awaiter(this, void 0, void 0, function* () {\n        const attackLength = 5;\n        const myPlayer = window.game.getMyPlayer();\n        const curPos = getPos();\n        const object = {\n            height: 2,\n            width: 2,\n            zIndex: 258,\n            type: 0,\n            x: 0,\n            y: 0,\n            normal: \"https://cdn.gather.town/storage.googleapis.com/gather-town.appspot.com/internal-dashboard/images/3d1W_l0DR0aYJyOlTIpsh\",\n            _name: \"\"\n        };\n        const coordinateToClear = [];\n        for (let i = 0; i < attackLength; i++) {\n            switch (curPos.direction) {\n                case 3: // up\n                    object.x = curPos.x;\n                    object.y = curPos.y - 1 - i;\n                    window.game.setImpassable(myPlayer.map, object.x, object.y, true);\n                    coordinateToClear.push({ x: object.x, y: object.y });\n                    window.game.setImpassable(myPlayer.map, object.x + 1, object.y, true);\n                    coordinateToClear.push({ x: object.x + 1, y: object.y });\n                    window.game.setImpassable(myPlayer.map, object.x - 1, object.y, true);\n                    coordinateToClear.push({ x: object.x - 1, y: object.y });\n                    break;\n                case 5: // left\n                    object.x = curPos.x - 1 - i;\n                    object.y = curPos.y;\n                    window.game.setImpassable(myPlayer.map, object.x, object.y, true);\n                    coordinateToClear.push({ x: object.x, y: object.y });\n                    window.game.setImpassable(myPlayer.map, object.x, object.y + 1, true);\n                    coordinateToClear.push({ x: object.x, y: object.y + 1 });\n                    window.game.setImpassable(myPlayer.map, object.x, object.y - 1, true);\n                    coordinateToClear.push({ x: object.x, y: object.y - 1 });\n                    break;\n                case 7: // right\n                    object.x = curPos.x - 1 + i;\n                    object.y = curPos.y;\n                    window.game.setImpassable(myPlayer.map, object.x, object.y, true);\n                    coordinateToClear.push({ x: object.x, y: object.y });\n                    window.game.setImpassable(myPlayer.map, object.x, object.y + 1, true);\n                    coordinateToClear.push({ x: object.x, y: object.y + 1 });\n                    window.game.setImpassable(myPlayer.map, object.x, object.y - 1, true);\n                    coordinateToClear.push({ x: object.x, y: object.y - 1 });\n                    break;\n                case 1: // down\n                    object.x = curPos.x;\n                    object.y = curPos.y - 1 + i;\n                    window.game.setImpassable(myPlayer.map, object.x, object.y, true);\n                    coordinateToClear.push({ x: object.x, y: object.y });\n                    window.game.setImpassable(myPlayer.map, object.x + 1, object.y, true);\n                    coordinateToClear.push({ x: object.x + 1, y: object.y });\n                    window.game.setImpassable(myPlayer.map, object.x - 1, object.y, true);\n                    coordinateToClear.push({ x: object.x - 1, y: object.y });\n                    break;\n            }\n            object._name = `${myPlayer.id}-attack-${i}`;\n            object.id = `${myPlayer.id}-attack-${i}`;\n            window.game.addObject(myPlayer.map, object);\n            yield new Promise((r) => setTimeout(r, 100));\n        }\n        yield new Promise((r) => setTimeout(r, 3000));\n        for (let i = 0; i < attackLength; i++) {\n            try {\n                window.game.deleteObject(myPlayer.map, window.game.filterObjectsInMap(myPlayer.map, (o) => o._name === `${myPlayer.id}-attack-${i}`)[0].id, true);\n            }\n            catch (e) { }\n            yield new Promise((r) => setTimeout(r, 100));\n        }\n        for (const coord of coordinateToClear) {\n            window.game.setImpassable(myPlayer.map, coord.x, coord.y, false);\n        }\n    });\n}\ndocument.onkeydown = function (event) {\n    if (event.keyCode === 67) {\n        console.log('triggered');\n        attack();\n    }\n};\n"],"names":[],"sourceRoot":""}